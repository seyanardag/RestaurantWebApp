@model List<ResultNotificationDtoUI>

@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/AdminLayout/Index.cshtml";
	int count = 1;
	string classByStatus = "";
	string textByStatus = "";
	string typeByStatus = "";
}



<div class="row">
	<div class="col-md-12">
		<div class="card">
			<div class="card-header">
				<div class="card-title">Bildirim Listesi</div>
			</div>
			<div class="card-body">
				<div class="card-sub">
					<p>Bildirim ile ilgili işlemleri burada gerçekleştirebilirsiniz.</p>
					<p><strong> Açıklaması uzun olan bildirimleri okumak için fareyi üzerinde tutabilirsiniz </strong></p>

				</div>
				<table class="table mt-3">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Bildirim tipi</th>
							<th scope="col">Açıklama</th>
							<th scope="col">Durum</th>
							<th scope="col">Tarih</th>
							<th scope="col">Sil</th>
							<th scope="col">Güncelle</th>
						</tr>
					</thead>
					<tbody>

						@foreach (var item in Model)
						{
							if (item.IsRead)
							{
								classByStatus = "badge badge-success";
								textByStatus = "Okundu";
							} else
							{
								classByStatus = "badge badge-warning";
								textByStatus = "Okumadı";
							}

							

							switch (item.Type)
							{
								case "primary":
									typeByStatus = "badge badge-primary";
									break;
								case "info":
									typeByStatus = "badge badge-info";
									break;
								case "success":
									typeByStatus = "badge badge-success";
									break;
								case "warning":
									typeByStatus = "badge badge-warning";
									break;
								case "danger":
									typeByStatus = "badge badge-danger";
									break;


									
							}


							<tr>
								<td>@(count++)</td>
								<td> 
									
									<span style="height:2rem !important; width:2rem !important; display:inline-block !important;" class="@typeByStatus"></span> 
									
								
								</td>
								<td >								

										@if (item.Description.Length < 50)
										{
											@item.Description
										} else
										{
											<a href="#" title="@item.Description" >
												@(item.Description.Substring(0,47)+"...")
											</a>
										}


								</td>
								<td>@item.Date.ToString("dd.MMM.yyyy - hh:mm") </td>
								<td>
									<span class="@classByStatus">@textByStatus</span>
								</td>
								<td>
									<a class=" btn btn-outline-danger sweetAlertConfirm" asp-controller="Notification" asp-action="DeleteNotification" asp-route-id="@item.NotificationId">SİL</a>
								</td>
								<td>
									<a class=" btn btn-outline-warning" asp-controller="Notification" asp-action="UpdateNotification" asp-route-id="@item.NotificationId">GÜNCELLE</a>
								</td>
							</tr>
						}


					</tbody>
				</table>

				<a class="btn btn-outline-success" asp-controller="Notification" asp-action="CreateNotification">Yeni Bildirim Yayımla</a>
			</div>
		</div>


	</div>

</div>

<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
<script>
	// NoConflict modunu kullan
	var $jq = jQuery.noConflict();
	$jq(function () {
		$jq(document).tooltip();
	});
</script>




